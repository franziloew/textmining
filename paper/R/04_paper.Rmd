---
title: "Data Description"
author: "Franziska LÃ¶w"
date: "`r format(Sys.Date())`"
output: pdf_document
---

```{r, include=FALSE}
# load the packages
libs <- c("tidytext","tidyr","readr","lubridate","tm","stm","RColorBrewer","topicmodels",
          "plyr","dplyr","class","knitr","kableExtra","cldr","data.table",
          "htmlTable","ggplot2","ggthemes","stringr","scales","rjson")
lapply(libs, library, character.only = TRUE)
```

```{r, include=FALSE}
#Load Data
rm(list = ls())

load("../output/btw_combined.Rda")
```

To explore the effect of topic prevalence of an article on the times this article is shared on Facebook, we analyze a sample of 6578 news articles containing the term "Bundestagswahl" (Federal Election) dated from 01.06.2017 to 10.10.2017\footnote{German federal elections took place on 24th of September 2017.} and originated from seven different german news sources.\footnote{Bild.de, Focus.de, Spiegel.de, Stern.de, Welt.de, Zeit.de} For each document in our sample, we observe the day it was written, the number of shares on Facebook and the newswire service publishing the report. We include the month the document was writte and the news agency as covariates on topical prevalence. We also include news agency as a covariate affecting topical content to estimate how topics are discussed in different ways by different news agencies \citep{roberts_model_2016}.
To determine the number of topics, we use a cross-validation scheme and maximize topics' coherence while changing the number of topics \citep{airoldi_reconceptualizing_2010}.

Figure -- shows the number of articles by news agency and the how many of these articles were shared on Facebook. 

```{r echo=FALSE}
btw$shared <- ifelse(btw$fb_shares == 0, "0", NA)
btw$shared <- ifelse(btw$fb_shares > 0 | btw$fb_shares >= 100, "0-100", btw$shared)
btw$shared <- ifelse(btw$fb_shares > 100, "> 100", btw$shared)

btw %>%
  ggplot(aes(site, fill=shared)) +
  geom_bar(alpha = .9) +
  labs(x="", y="Count") +
  scale_fill_ptol("Shared on\n Facebook") +
  theme_minimal()
```

```{r}
btw %>%
  filter(site=="zeit.de") %>%
  select(title) %>%
  .[2,]
```

